<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TSB Data Viz</title>
<style type="text/css">
text {
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 12px;
}
</style>
<script type="text/javascript" src="../lib/d3.v3.min.js"></script>
<script type="text/javascript" src="../js/fields.js"></script>
<script type="text/javascript" src="sparql.js"></script>
<script type="text/javascript" src="q.min.js"></script>
<script type="text/javascript" src="DataSet.js"></script>
<script type="text/javascript" src="SPARQLDataSource.js"></script>
<script type="text/javascript">
var ds = new SPARQLDataSource();

ds.getProjectsParticipants().then(function(data) {
  var projectsById = data.groupBy('project');
  var projects = [];
  for(var id in projectsById) {
    if (id == 'uniqueValues') continue;
    var project = projectsById[id];
    projects.push(project);
  }
  projects.sort(function(a, b) {
    return -(a.rows.length - b.rows.length);
  })
  console.log('bla',projects);
})

</script>
</head>
<body>
  <div id="charts"></div>
</body>
</html>